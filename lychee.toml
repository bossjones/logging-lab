# from lunar-claude
#############################  Display  #############################

# Verbose program output
# Accepts log level: "error", "warn", "info", "debug", "trace"
verbose = "info"

# Don't show interactive progress bar while checking links.
no_progress = false

# Path to summary output file.
output = ".lychee-report.md"

#############################  Cache  ###############################

# Enable link caching. This can be helpful to avoid checking the same links on
# multiple runs.
cache = true

# Discard all cached requests older than this duration.
max_cache_age = "7d"

#############################  Runtime  #############################

# Number of threads to utilize.
# Defaults to number of cores available to the system if omitted.
# threads = 2

# Maximum number of allowed redirects.
max_redirects = 10

# Maximum number of allowed retries before a link is declared dead.
max_retries = 2

# Maximum number of concurrent link checks.
max_concurrency = 20

#############################  Requests  ############################

# User agent to send with each request.
user_agent = "lychee/0.21.0"

# Website timeout from connect to response finished.
timeout = 20

# Minimum wait time in seconds between retries of failed requests.
retry_wait_time = 2

# Comma-separated list of accepted status codes for valid links.
# 401/403/405 are included for API endpoints that require authentication
# (these indicate the endpoint exists but needs auth, which is expected for examples)
accept = ["200", "401", "403", "405", "429"]

# Proceed for server connections considered insecure (invalid TLS).
insecure = false

# Only test links with the given schemes (e.g. https).
# Omit to check links with any other scheme.
# At the moment, we support http, https, file, and mailto.
scheme = ["https", "http"]

# When links are available using HTTPS, treat HTTP links as errors.
require_https = false

# Request method
method = "get"

# Fallback extensions to apply when a URL does not specify one.
# This is common in documentation tools that cross-reference files without extensions.
fallback_extensions = ["md", "html"]

# Enable the checking of fragments in links.
include_fragments = true

#############################  Exclusions  ##########################

# Skip missing input files (default is to error if they don't exist).
skip_missing = false

# Check links inside `<code>` and `<pre>` blocks as well as Markdown code
# blocks.
include_verbatim = false

# Ignore case of paths when matching glob patterns.
glob_ignore_case = false

# Exclude URLs and mail addresses from checking. The values are treated as regular expressions
exclude = [
    # Localhost URLs (from code examples)
    '^https?://localhost',
    '^https?://127\.0\.0\.1',
    '^https?://0\.0\.0\.0',
    # File URLs
    '^file://',
    # Private/local development URLs
    '^https?://.*\.local',
    # Common example domains
    '^https?://example\.com',
    '^https?://example\.org',
    # API base URLs (examples in documentation - these are just endpoint roots)
    '^https?://api\.(stripe|openai)\.com/v1/?$',
    # Demo/test environments
    '^https?://demo\.netbox\.dev',
]

# Exclude paths from getting checked. The values are treated as regular expressions
exclude_path = [
    # Exclude node_modules and other common build/dependency directories
    "(^|/)node_modules/",
    "(^|/)\\.venv/",
    "(^|/)\\.git/",
    "(^|/)__pycache__/",
    "(^|/)\\.pytest_cache/",
    # Exclude test fixtures that may contain example URLs
    "(^|/)tests/fixtures/",
    # Exclude lychee report file (contains old broken links)
    "(^|/)\\.lychee-report\\.md$",
]

# Exclude all private IPs from checking.
# Equivalent to setting `exclude_private`, `exclude_link_local`, and
# `exclude_loopback` to true.
exclude_all_private = true

# Exclude private IP address ranges from checking.
exclude_private = true

# Exclude link-local IP address range from checking.
exclude_link_local = true

# Exclude loopback IP address range and localhost from checking.
exclude_loopback = true

# Check mail addresses
include_mail = false
